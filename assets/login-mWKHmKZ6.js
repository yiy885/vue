import{_ as F,u as M,m as z,E as C,g as E,i as L,w as s,r as n,o as N,a as o,j as l,B as U,b as a,l as r,t as $}from"./index-Blk4pwDk.js";import{u as q,c as I,a as x,b as w}from"./index.esm-DQuF3nNN.js";import{_ as V}from"./custom-button.vue_vue_type_style_index_0_lang-B79Em365.js";import{V as R}from"./video-view-CnzhHRDy.js";import{b as S}from"./route-block-B_A1xBdJ.js";const T={class:"grid-content ep-bg-purple"},j={class:"grid-content ep-bg-purple-light"},P={class:"login-title-container"},W={class:"login-title-container"},A={class:"login-title-container"},G={class:"login-button-container"},H={class:"login-button-container"},h={__name:"login",setup(J){const g=(i,e="success")=>C({message:i,type:e}),f=E(),v=M(),u=q({validationSchema:I({account:x().required("帳號或電子郵件是必填的"),password:x().required("密碼是必填的").min(5,"密碼至少需要 5 個字元").max(20,"密碼最多只能有 20 個字元")})}),d=w("account"),m=w("password"),k=()=>{f.push("/register")},y=u.handleSubmit(async i=>{var e,c;try{const{data:t}=await z.login({account:i.account,password:i.password});v.login(t.user),g("登入成功","success"),f.push("/")}catch(t){console.error(t),g(((c=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:c.message)||"登入失敗，請稍後再試！","error")}});return(i,e)=>{const c=n("el-col"),t=n("el-text"),b=n("el-input"),_=n("el-form-item"),B=n("el-form"),D=n("el-row");return N(),L(D,null,{default:s(()=>[o(c,{sm:16,xs:24},{default:s(()=>[l("div",T,[o(R,{class:"video-container"})])]),_:1}),o(c,{sm:8,xs:24},{default:s(()=>[l("div",j,[o(B,{disabled:a(u).isSubmitting.value,onSubmit:U(a(y),["prevent"])},{default:s(()=>[l("div",P,[o(t,{class:"mx-1 login-title"},{default:s(()=>[r($(a(v).isLoggedIn?"Welcome":"Login"),1)]),_:1})]),o(_,{error:a(d).errorMessage.value},{default:s(()=>[l("div",W,[o(t,{class:"mx-1",size:"small"},{default:s(()=>e[2]||(e[2]=[r("E-mail",-1)])),_:1,__:[2]})]),o(b,{modelValue:a(d).value.value,"onUpdate:modelValue":e[0]||(e[0]=p=>a(d).value.value=p),class:"login-input",placeholder:"輸入帳號或信箱",clearable:""},null,8,["modelValue"])]),_:1},8,["error"]),o(_,{error:a(m).errorMessage.value},{default:s(()=>[l("div",A,[o(t,{class:"mx-1",size:"small"},{default:s(()=>e[3]||(e[3]=[r("Password",-1)])),_:1,__:[3]})]),o(b,{type:"password",modelValue:a(m).value.value,"onUpdate:modelValue":e[1]||(e[1]=p=>a(m).value.value=p),class:"login-input",placeholder:"輸入密碼",clearable:""},null,8,["modelValue"])]),_:1},8,["error"]),o(_,null,{default:s(()=>[l("div",G,[o(V,{height:"30px","background-color":" #F5DF4D","text-color":"black",loading:a(u).isSubmitting.value,"native-type":"submit"},{default:s(()=>e[4]||(e[4]=[r("Login",-1)])),_:1,__:[4]},8,["loading"])]),l("div",H,[o(t,{class:"mx-1",size:"small"},{default:s(()=>e[5]||(e[5]=[r("Don’t have an account?",-1)])),_:1,__:[5]}),o(V,{height:"30px","background-color":" #939597","text-color":"white",onClick:k},{default:s(()=>e[6]||(e[6]=[r("Sign up",-1)])),_:1,__:[6]})])]),_:1})]),_:1},8,["disabled","onSubmit"])])]),_:1})]),_:1})}}};typeof S=="function"&&S(h);const Z=F(h,[["__scopeId","data-v-f263665b"]]);export{Z as default};
